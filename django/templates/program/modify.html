{% extends "base.html" %}
{% block title %}{{ title }} - 清华大学广播站{% endblock %}
{% block body %}
<div class="col-sm-offset-4">
<h1>修改节目信息</h1>
</br>
</div>
<form class="form-horizontal" action="modifyword/{{pgid}}/" method="post" role="form">
    {% csrf_token %}
    <div class="form-group">
        <label for="group" class="col-sm-offset-1 col-sm-2 control-label">节目组别</label>
        <div class="col-sm-6">
            <select name="group" class="form-control">
                <option value="" {% if group == 0 %}selected="selected"{%endif%}>---------</option>
                {% for item in groups %}
                <option value="{{item.id}}" {% if group == item.id %}selected="selected"{%endif%}>{{ item.title }}</option>
                {% endfor %}
            </select>
        </div>
    </div>
    <div class="form-group">
        <label for="series" class="col-sm-offset-1 col-sm-2 control-label">节目系列</label>
        <div class="col-sm-6">
            <select name="series" class="form-control">
                <option value="" {% if series == 0 %}selected="selected"{%endif%}>---------</option>
                {% for item in series_all %}
                <option value="{{item.id}}" {% if series == item.id %}selected="selected"{%endif%}>{{ item.title }}</option>
                {% endfor %}
            </select>
        </div>
    </div>
    <div class="form-group">
        <label for="title" class="col-sm-offset-1 col-sm-2 control-label">节目标题</label>
        <div class="col-sm-6">
            <input type="text" class="form-control" name="title" id="title" value={{ title }}>
        </div>
    </div>
    <div class="form-group">
        <label for="description" class="col-sm-offset-1 col-sm-2 control-label">节目描述</label>
        <div class="col-sm-6">
            <input type="text" class="form-control" name="description" id="description" value={{ description }}>
        </div>
    </div>
    <div class="form-group">
        <label for="recorder" class="col-sm-offset-1 col-sm-2 control-label">录音/播音人员</label>
        <div class="col-sm-6">
            <input type="text" class="form-control" name="recorder" id="recorder" value={{ recorder }}>
        </div>
    </div>
    <div class="form-group">
        <label for="contributor" class="col-sm-offset-1 col-sm-2 control-label">稿件来源</label>
        <div class="col-sm-6">
            <input type="text" class="form-control" name="contributor" id="contributor" value={{ contributor }}>
        </div>
    </div>
    <div class="form-group">
        <label for="workers" class="col-sm-offset-1 col-sm-2 control-label">机务人员</label>
        <div class="col-sm-6">
            <input type="text" class="form-control" name="workers" id="workers" value={{ workers }}>
        </div>
    </div>
    <div class="form-group">
        <input class="btn btn-info col-sm-offset-5" type="submit" value="确认修改"\>
    </div>
</form>
</br>
<form class="form-horizontal" action="modifyaudio/{{pgid}}/" method="post" role="form" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="form-group">
        <label for="audio" class="col-sm-offset-1 col-sm-2 control-label">音频文件</label>
        <div class="col-sm-3">
            <input type="file" class="form-control" name="audio" id="audio">
        </div>
        <label class="col-sm-3">{{ mediatitle }}</label>
    </div>
    <button class="btn btn-info col-sm-offset-5" type="submit">替换音频文件</button>
</form>
</br>
</br>
<form class="form-horizontal" action="modifypic/{{pgid}}/" method="post" role="form" id="pic-form" enctype="multipart/form-data">
    {% csrf_token %}
    {% for item in pictitle %}
    <div class="form-group">
        <label for="picture" class="col-sm-offset-1 col-sm-2 control-label">图片文件</label>
        <div class="col-sm-3">
            <input type="file" class="form-control" name="picture" id="picture">
        </div>
        <label class="col-sm-3">{{ item }}</label>
        <button type="button" class="btn btn-danger" onclick="delPicture(this)">
            <span class="glyphicon glyphicon-minus"> 删除</span>
        </button>
    </div>
    {% endfor %}
    <div class="form-group" id="add-pic-div">
        <button type="button" class="btn btn-info col-sm-offset-4" id="add-pic" onclick="addPicture(this)">
            <span class="glyphicon glyphicon-plus"></span> 添加更多图片
        </button>
        <button type="submit" class="btn btn-info col-sm-offset-1">确认修改图片</button>
    </div>
</form>
</br>
<form class="form-horizontal" action="modifydoc/{{pgid}}/" method="post" role="form" id="doc-form" enctype="multipart/form-data">
    {% csrf_token %}
    {% for item in doctitle %}
    <div class="form-group">
        <label for="document" class="col-sm-offset-1 col-sm-2 control-label">文稿文件</label>
        <div class="col-sm-3">
            <input type="file" class="form-control" name="document" id="document">
        </div>
        <label class="col-sm-3">{{ item }}</label>
        <button type="button" class="btn btn-danger" onclick="delDocument(this)">
            <span class="glyphicon glyphicon-minus"> 删除</span>
        </button>
    </div>
    {% endfor %}
    <div class="form-group" id="add-doc-div">
        <button type="button" class="btn btn-info col-sm-offset-4" id="add-doc" onclick="addDocument(this)">
            <span class="glyphicon glyphicon-plus"></span> 添加更多文稿
        </button>
        <button type="submit" class="btn btn-info col-sm-offset-1">确认修改文稿</button>
    </div>
</form>
{% endblock %}
{% block script %}
<script>
var pictureIndex = 1;
var docIndex = 1;
function addPicture(x) {
    var fdiv=document.createElement("div");
    fdiv.setAttribute("class", "form-group");
    document.getElementById("pic-form").insertBefore(fdiv, document.getElementById("add-pic-div"));
    var plabel=document.createElement("label");
    plabel.setAttribute("for", "picture"+pictureIndex);
    plabel.setAttribute("class", "col-sm-offset-1 col-sm-2 control-label");
    plabel.innerHTML="图片文件";
    fdiv.appendChild(plabel);
    var pdiv=document.createElement("div");
    pdiv.setAttribute("class", "col-sm-3");
    fdiv.appendChild(pdiv);
    var pinput=document.createElement("input");
    pinput.setAttribute("type", "file");
    pinput.setAttribute("class", "form-control");
    pinput.setAttribute("multiple", "true");
    pinput.setAttribute("name", "picture");
    pinput.setAttribute("id", "picture"+pictureIndex);
    pdiv.appendChild(pinput);
    var plabel=document.createElement("label");
    plabel.setAttribute("class", "col-sm-3");
    fdiv.appendChild(plabel);
    var pbutton=document.createElement("button");
    pbutton.setAttribute("type", "button");
    pbutton.setAttribute("class", "btn btn-danger");
    pbutton.setAttribute("onclick", "delPicture(this)");
    fdiv.appendChild(pbutton);
    var pspan=document.createElement("span");
    pspan.setAttribute("class", "glyphicon glyphicon-minus");
    pbutton.appendChild(pspan);
    pspan.innerHTML = " 删除";
    pictureIndex=pictureIndex+1;
}
function delPicture(x) {
    var tparent = x.parentNode;
    var fparent = tparent.parentNode;
    fparent.removeChild(tparent);
}
function addDocument(x) {
    var fdiv=document.createElement("div");
    fdiv.setAttribute("class", "form-group");
    document.getElementById("doc-form").insertBefore(fdiv, document.getElementById("add-doc-div"));
    var plabel=document.createElement("label");
    plabel.setAttribute("for", "document"+docIndex);
    plabel.setAttribute("class", "col-sm-offset-1 col-sm-2 control-label");
    plabel.innerHTML="文稿文件";
    fdiv.appendChild(plabel);
    var pdiv=document.createElement("div");
    pdiv.setAttribute("class", "col-sm-3");
    fdiv.appendChild(pdiv);
    var pinput=document.createElement("input");
    pinput.setAttribute("type", "file");
    pinput.setAttribute("class", "form-control");
    pinput.setAttribute("multiple", "true");
    pinput.setAttribute("name", "document");
    pinput.setAttribute("id", "document"+docIndex);
    pdiv.appendChild(pinput);
    var plabel=document.createElement("label");
    plabel.setAttribute("class", "col-sm-3");
    fdiv.appendChild(plabel);
    var pbutton=document.createElement("button");
    pbutton.setAttribute("type", "button");
    pbutton.setAttribute("class", "btn btn-danger");
    pbutton.setAttribute("onclick", "delDocument(this)");
    fdiv.appendChild(pbutton);
    var pspan=document.createElement("span");
    pspan.setAttribute("class", "glyphicon glyphicon-minus");
    pbutton.appendChild(pspan);
    pspan.innerHTML = " 删除";
    docIndex=docIndex+1;
}
function delDocument(x) {
    var tparent = x.parentNode;
    var fparent = tparent.parentNode;
    fparent.removeChild(tparent);
}
</script>
{% endblock %}

